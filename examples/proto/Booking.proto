/**
 * Booking related messages.
 *
 * This file is really just an example. The data model is completely
 * fictional.
 */
syntax = "proto3";

import "google/api/annotations.proto";
import "github.com/mwitkow/go-proto-validators/validator.proto";

package com.example;

/**
 * Represents the booking status ID.
 */
message BookingStatusID {
  int32 id = 1; /// Unique booking status ID.
}

/**
 * Represents the status of a vehicle booking.
 */
message BookingStatus {
  int32 id           = 1; /// Unique booking status ID.
  string description = 2 [(validator.field) = {string_not_empty: true, length_lt: 255}]; /// Booking status description. E.g. "Active".
}

/**
 * Represents the booking of a vehicle.
 *
 * Vehicles are some cool shit. But drive carefully!
 */
message Booking {
  int32 vehicle_id     = 1; /// ID of booked vehicle.
  int32 customer_id    = 2; /// Customer that booked the vehicle.
  BookingStatus status = 3; /// Status of the booking.

  /** Has booking confirmation been sent? */
  // Multi-paragraph docs
  bool confirmation_sent = 4;

  /** Has payment been received? */
  bool payment_received = 5;

  string color_preference = 6 [deprecated=true]; // Color preference of the customer.
}

// An empty message for testing
message EmptyBookingMessage {
}

/**
 * Service for handling vehicle bookings.
 */
service BookingService {
  /// Used to book a vehicle. Pass in a Booking and a BookingStatus will be returned.
  rpc BookVehicle (Booking) returns (BookingStatus) {
    option (google.api.http) = {
      post: "/api/bookings/vehicle/{vehicle_id}"
      body: "*"
    };
  }

  /// Used to subscribe to updates of the BookingStatus.
  rpc BookingUpdates (BookingStatusID) returns (stream BookingStatus);
}

/**
 * @exclude
 * This comment won't be rendered
 */
message ExcludedMessage {
  string id   = 1; // the id of this message.
  string name = 2; // @exclude this comment

  // Keep this comment
  /* @exclude this comment */
  int32 value = 3;

  // Keep this line
  // @exclude-line excludes this line
  // Keep this line also
  int32 value1 = 4;

  // @exclude this block
  // some more comments
  /* Keep this new block */
  int32 value2 = 5;
}

/**
 * @skip
 * This comment won't be rendered when using @skip directive
 */
message CustomExcludedMessage {
  string id   = 1; // the id of this message.
  string name = 2; // @skip this comment when using @skip directive

  // Keep this comment
  /* @skip this block comment when using @skip directive */
  int32 value = 3;

  // Keep this line
  //buf:lint:ignore FIELD_COMMENT
  int32 value1 = 4;

  // @skip this paragraph when using @skip directive
  // some more comments
  /* Keep this new block */
  int32 value2 = 5;
}
